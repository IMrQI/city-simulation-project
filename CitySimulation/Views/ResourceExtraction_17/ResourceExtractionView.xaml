<UserControl x:Class="CitySimulation.Views.ResourceExtraction_17.ResourceExtractionView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
             Height="Auto" Width="Auto">

    <UserControl.Resources>
        <x:Array x:Key="ResourceTypes" Type="sys:String">
            <sys:String>Нефть</sys:String>
            <sys:String>Газ</sys:String>
            <sys:String>Железо</sys:String>
            <sys:String>Медь</sys:String>
            <sys:String>Дерево</sys:String>
        </x:Array>
    </UserControl.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
        <Grid MinHeight="600" MinWidth="1000">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Заголовок с номером варианта -->
            <TextBlock Grid.Row="0" Text="⚒️ Добыча природных ресурсов (Вариант 17)" 
                      FontSize="20" FontWeight="Bold" Margin="10" Background="LightBlue" Padding="10"/>

            <TabControl Grid.Row="1" Margin="10">
                <!-- Вкладка месторождений -->
                <TabItem Header="Месторождения">
                    <Grid Margin="10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="10"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Список месторождений -->
                        <StackPanel Grid.Column="0">
                            <TextBlock Text="Список месторождений:" FontWeight="Bold" Margin="0,0,0,10"/>
                            <ListBox ItemsSource="{Binding ResourceExtractionVM_17.ResourceDeposits}" 
                                     SelectedItem="{Binding ResourceExtractionVM_17.SelectedDeposit}"
                                     Height="200" Margin="0,0,0,10">
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel Margin="5">
                                            <TextBlock Text="{Binding Name}" FontWeight="Bold"/>
                                            <TextBlock Text="{Binding ResourceType, StringFormat='Ресурс: {0}'}"/>
                                            <TextBlock Text="{Binding CurrentAmount, StringFormat='Остаток: {0:N0}'}"/>
                                            <TextBlock Text="{Binding ExtractionRate, StringFormat='Добыча: {0}/день'}" FontSize="10"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                            </ListBox>

                            <Button Content="Добыть ресурсы" 
                                    Command="{Binding ResourceExtractionVM_17.ExtractResourcesCommand}"
                                    Background="LightGreen" Width="120" Height="30"/>
                        </StackPanel>

                        <!-- Форма добавления месторождения -->
                        <StackPanel Grid.Column="2">
                            <TextBlock Text="Добавить новое месторождение:" FontWeight="Bold" Margin="0,0,0,10"/>

                            <StackPanel>
                                <TextBlock Text="Название месторождения:" Margin="0,0,0,2"/>
                                <TextBox Text="{Binding ResourceExtractionVM_17.NewDepositName}" Height="25" Margin="0,0,0,10"/>

                                <TextBlock Text="Тип ресурса:" Margin="0,0,0,2"/>
                                <ComboBox ItemsSource="{StaticResource ResourceTypes}"
                                          SelectedValue="{Binding ResourceExtractionVM_17.NewDepositResourceType}"
                                          Height="25" Margin="0,0,0,10"/>

                                <TextBlock Text="Вместимость:" Margin="0,0,0,2"/>
                                <TextBox Text="{Binding ResourceExtractionVM_17.NewDepositCapacity}" Height="25" Margin="0,0,0,10"/>

                                <Button Content="Добавить месторождение" 
                                        Command="{Binding ResourceExtractionVM_17.AddDepositCommand}"
                                        Width="180" Height="30"/>
                            </StackPanel>
                        </StackPanel>
                    </Grid>
                </TabItem>

                <!-- Вкладка оборудования -->
                <TabItem Header="Оборудование">
                    <Grid Margin="10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="10"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Список оборудования -->
                        <StackPanel Grid.Column="0">
                            <TextBlock Text="Добывающее оборудование:" FontWeight="Bold" Margin="0,0,0,10"/>
                            <ListBox ItemsSource="{Binding ResourceExtractionVM_17.Equipment}" 
                                     SelectedItem="{Binding ResourceExtractionVM_17.SelectedEquipment}"
                                     Height="200" Margin="0,0,0,10">
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel Margin="5">
                                            <TextBlock Text="{Binding Name}" FontWeight="Bold"/>
                                            <TextBlock Text="{Binding EquipmentType, StringFormat='Тип: {0}'}"/>
                                            <TextBlock Text="{Binding Efficiency, StringFormat='Эффективность: {0:P0}'}"/>
                                            <TextBlock Text="{Binding IsOperational, StringFormat='Статус: {0}'}"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                            </ListBox>

                            <StackPanel Orientation="Horizontal">
                                <Button Content="Вкл/Выкл" 
                                        Command="{Binding ResourceExtractionVM_17.ToggleEquipmentCommand}"
                                        Width="100" Height="30" Margin="0,0,10,0"/>
                            </StackPanel>
                        </StackPanel>

                        <!-- Форма добавления оборудования -->
                        <StackPanel Grid.Column="2">
                            <TextBlock Text="Добавить новое оборудование:" FontWeight="Bold" Margin="0,0,0,10"/>

                            <StackPanel>
                                <TextBlock Text="Название оборудования:" Margin="0,0,0,2"/>
                                <TextBox Text="{Binding ResourceExtractionVM_17.NewEquipmentName}" Height="25" Margin="0,0,0,10"/>

                                <TextBlock Text="Тип оборудования:" Margin="0,0,0,2"/>
                                <TextBox Text="{Binding ResourceExtractionVM_17.NewEquipmentType}" Height="25" Margin="0,0,0,10"/>

                                <TextBlock Text="Эффективность (0.0-1.0):" Margin="0,0,0,2"/>
                                <TextBox Text="{Binding ResourceExtractionVM_17.NewEquipmentEfficiency}" Height="25" Margin="0,0,0,10"/>

                                <Button Content="Добавить оборудование" 
                                        Command="{Binding ResourceExtractionVM_17.AddEquipmentCommand}"
                                        Width="180" Height="30"/>
                            </StackPanel>
                        </StackPanel>
                    </Grid>
                </TabItem>
            </TabControl>

            <!-- Статус бар -->
            <StatusBar Grid.Row="2" Background="LightBlue">
                <TextBlock Text="{Binding ResourceExtractionVM_17.StatusMessage}" FontWeight="Bold"/>
            </StatusBar>
        </Grid>
    </ScrollViewer>
</UserControl>